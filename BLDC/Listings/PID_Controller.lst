C251 COMPILER V5.60.0,  PID_Controller                                                     01/03/25  15:57:30  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE PID_Controller
OBJECT MODULE PLACED IN .\Objects\PID_Controller.obj
COMPILER INVOKED BY: D:\mcu\Keil5\C251\BIN\C251.EXE PID_Controller.c XSMALL INTR2 BROWSE DEBUG PRINT(.\Listings\PID_Cont
                    -roller.lst) OBJECT(.\Objects\PID_Controller.obj) 

stmt  level    source

    1          #include "PWM_Controller.h"
    2          #define _constrain(amt,low,high) ((amt)<(low)?(low):((amt)>(high)?(high):(amt)))
    3          
    4          double error = 0;
    5          double error_prev = 0;
    6          
    7          float kp = 0.1;
    8          float ki = 0.1;
    9          float kd = 0.1;
   10          double max_pid;
   11          double min_pid;
   12          double integralMin;
   13          double integralMax;
   14          
   15          void AdjustPID(float kp_, float ki_, float kd_)//调整PID参数 但是没想好
   16          {
   17   1          kp = kp_;
   18   1          ki = ki_;
   19   1          kd = kd_;
   20   1      }
   21          
   22          double PID_Controller(double setpoint, double actual_value)
   23          {
   24   1          // double dt;
   25   1          // dt = timestamp - timestamp_previous;
   26   1      
   27   1          double pid = 0;
   28   1          double integral = 0;
   29   1          double derivative = 0;
   30   1      
   31   1          error = setpoint - actual_value;
   32   1          integral = _constrain(integral + error, integralMin, integralMax);
   33   1          derivative = error - error_prev;
   34   1          pid = _constrain(kp * error + ki * integral + kd * derivative, min_pid, max_pid);
   35   1          
   36   1          error_prev = error;
   37   1          return pid;
   38   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       208     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        36          4
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        40     ------
End of Module Information.

C251 COMPILER V5.60.0,  PID_Controller                                                     01/03/25  15:57:30  PAGE 2   


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
